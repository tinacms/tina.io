---
title: Auditing Content with GitHub Actions
last_edited: '2025-12-10T01:12:33.251Z'
next: ''
previous: ''
---

## Overview

As your site content begins to scale, keeping older content up to date can become difficult. 


This guide contains instructions to setup a GitHub Actions workflow to check for outdated content using AI and raise GitHub Issues.



![A GitHub Issue Created by the Workflow](/img/docs/content-audit-github-actions/CleanShot%202025-12-09%20at%2016.35.50.png "A GitHub Issue Created by the Workflow")

<scrollBasedShowcase
  showcaseItems={[
    {
      title: "Tina Cloud",
      image: "",
      content:
        "The GraphQL query you run pass will be evaluated in TinaCloud. This supplies the GitHub action with the list of files it will need to locate.\n",
      useAsSubsection: false
    },
    {
      title: "GitHub Actions",
      image: "",
      content:
        "The GitHub Action will use the response from TinaCloud to locate the correct files within your repository. From there the content of each file wil be read for review.\n",
      useAsSubsection: false
    },
    {
      title: "Issues",
      image: "",
      content:
        "After scanning your content the GitHub action will produce a list of issues with suggested improvements based on your system prompt.\n",
      useAsSubsection: true
    },
    {
      title: "Pull Requests",
      image: "",
      content:
        "The GitHub action will automatically create Pull Requests with the list of files that were checked. \n",
      useAsSubsection: true
    },
    {
      title: "GitHub Models",
      image: "",
      content:
        "GitHub models will read and evaluate your content, flagging any potential areas for improvement. \n",
      useAsSubsection: false
    }
  ]}
/>

## Installing the GitHub action

We have a created a public repo with a GitHub action you can use out of the box for auditing your content. All you need to do is copy the action into your repo and configure the settings. Follow the [installation steps](https://github.com/tinacms/github-content-auditor?tab=readme-ov-file#how-to-install) to set the action up yourself.

## Configuring your Repo

### **Permissions**

Enable the appropriate permissions for GitHub Actions:

1. Go to: **Your Repository | ⚙️ Settings | Actions | General | Workflow Permissions**
2. Enable read permissions for workflows within your repository
3. Allow GitHub Actions to create and approve pull requests

Enable GitHub Models for your repo:

1. Go to: **Your Repository  | ⚙️Settings | Models**
2. Ensure you have Models enabled for your repository

### Variables

You'll need to add configuration settings that will be used when the GitHub action is run. To configure the settings go to **Your Repo | ⚙️Settings | Secrets and Variables.**

#### Secrets

| Name                 | Description                                                                                                                 |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| **TINA\_TOKEN**      | Your TinaCloud API Token.                                                                                                   |
| **TINA\_CLIENT\_ID** | The Tina Client ID for your project. You can find it in **TinaCloud \| Projects \| \<your-project> \|  ⚙️ Project Details** |

#### Variables

| Name                               | Description                                                                                                                                                |
| ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **TINA\_AUDITOR\_CONTENT\_WINDOW** | A number indicating how many outdated content items will be checked when you run the action. (e.g. 5)                                                      |
| **TINA\_AUDITOR\_EXPIRY\_DAYS**    | The number of days that will pass before your content is re-evaluated after already being checked.                                                         |
| **TINA\_AUDITOR\_SYSTEM\_PROMPT**  | The prompt that will be used to evaluate your content when passing it to GitHub model.                                                                     |
| **TINA\_AUDITOR\_QUERY**           | The query that will be used to find the content within your repo. See [Adding your Query](/docs/guides/content-auditing-github-actions#adding-your-query). |

### Adding your Query

The query you supply as **TINA\_CONTENT\_QUERY** must be a connection type. For more information about connection queries please consult the [documentation](https://tina.io/docs/graphql/queries/query-documents). Note that query need only return `_sys.path` and accept the `$first` and `$filter` properties. The 2 filters will be supplied when the action is run and the path property will be used to locate your content.

```graphql
# Replace with your connetion
query <your-connection>($first: Float, $filter: <your-connection-filter>) {
	<your-connection>(first: $first, filter: $filter) {
		edges {
			cursor
			node {
				... on Document {
					_sys {
						path
					}
				}
			}
		}
	}
}
```

## Preparing your Content

TinaCloud will be used to locate and filter your content. We'll need add a couple of fields to your existing collections to enable the content checks.

```tsx
const MyCollection : Collection = {
  label: 'My Collection'
  name: 'myCollection'
  format: 'mdx'
  fields: [
    // new field
    {
      type: 'datetime',
      name: 'lastChecked',
      ui: {
        component: 'hidden',
      }
    },
    //...
  ]

}

```

> Be sure to regenerate and commit your  `tina-lock.json` after adding the new field .

In order for the script to run we need to seed all of you existing content with a `lastChecked` field.

Navigate to the directory for the workflow and add an env file

```bash
cd ./github/scripts/tina-helpers
touch .env
```

Add your **Tina Content Query**, **Tina Token** and **Tina Client ID** to the `.env` file. These are the same properties you'll be adding to your [GitHub Settings](/docs/guides/content-auditing-github-actions#secrets).

Then run the script below to migrate your content.

```bash
pnpm run migrate-content
```

The output should look something like this:

```bash
updated: content/posts/future-of-remote-work-2025.mdx 
updated: content/posts/learning-about-components.mdx 
updated: content/posts/june/learning-about-tinacloud.mdx 
updated: content/posts/artificial-intelligence-explained.mdx 

```

> You must commit and push the updated files for the GitHub action to work. The changes should work in TinaCloud.

## Running the Query

Once you've finished setting up the GitHub action for your own project you should be able to see a new workflow called **Audit Content with AI** in the GitHub Actions for your repo. You can run it manually to perform your first content audit.

![Running a content audit in GitHub Actions](/img/docs/content-audit-github-actions/running-github-action.gif "Running a Content Audit in GitHub")

The flow will output a list of issues after the conntent audit is finished. Each issue will contain a list of suggestions for the content and a handy link to the file that needs to be changed.![](/img/docs/content-audit-github-actions/issues-audit-action.png "Issue list after running content audit action")
The workflow will also output a pull request to updated the Last Checked date of every file that was audited.

<WarningCallout
  body={<>
    It's important that you merge this pull request before running the GitHub Action again. Otherwise it will audit the same files again when you re-run it.
  </>}
/>

![Pull Request with Last Checked Date Updated](/img/docs/content-audit-github-actions/content-audit-pr.png "Pull Request with Last Checked Date Updated")
