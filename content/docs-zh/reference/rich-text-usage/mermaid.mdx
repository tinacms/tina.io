---
title: Mermaid
last_edited: '2025-03-17T03:00:55.982Z'
next: content/docs-zh/reference/types/rich-text.mdx
previous: content/docs-zh/reference/rich-text-usage/markdown-tables.mdx
---

> â• TinaCMS ç°åœ¨åœ¨ç‰ˆæœ¬ 2.3.0+ ä¸­æ”¯æŒ **MermaidJS** å›¾è¡¨

## ä»€ä¹ˆæ˜¯ Mermaidï¼Ÿ

Mermaid æ˜¯ä¸€ç§ç”¨äº Markdown çš„å›¾è¡¨å®šä¹‰è¯­æ³•ã€‚

> æ›´å¤šè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹ [MermaidJS æ–‡æ¡£](https://mermaid.js.org/config/usage.html)ã€‚

ä½¿ç”¨è¿™ç§ç®€å•çš„å›¾å½¢æè¿°è¯­è¨€å¯ä»¥åˆ›å»ºæµç¨‹å›¾ã€æ—¶åºå›¾ã€ç”˜ç‰¹å›¾ç­‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ Mermaid è¯­æ³•ç¤ºä¾‹ï¼š

````
```mermaid
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
```
````

```mermaid
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
```

## Mermaid é…ç½®

æ‚¨è¿˜å¯ä»¥ç›´æ¥åœ¨ Mermaid ä»£ç å—ä¸­ä¼ é€’é…ç½®é€‰é¡¹ï¼Œä»¥æ§åˆ¶å›¾è¡¨çš„æ¸²æŸ“æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†ä¸»é¢˜è®¾ç½®ä¸ºæš—æ¨¡å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

````
```mermaid
--- 
config: 
  theme: dark 
---
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
```
````

```mermaid
---
config:
  theme: dark
---
graph TD;
  A-->B;
  A-->C;
  B-->D;
  C-->D;
```

## ç¼–è¾‘å’Œé¢„è§ˆ Mermaid å›¾è¡¨

æ’å…¥ Mermaid å›¾è¡¨åï¼Œæ‚¨å¯ä»¥åœ¨ **ç¼–è¾‘æ¨¡å¼**ï¼ˆç”¨äºä¿®æ”¹ Mermaid ä»£ç ï¼‰å’Œ **é¢„è§ˆæ¨¡å¼**ï¼ˆæŸ¥çœ‹æ¸²æŸ“åçš„å›¾è¡¨ï¼‰ä¹‹é—´åˆ‡æ¢ã€‚

* **æ¡Œé¢ç«¯**ï¼šå°†é¼ æ ‡æ‚¬åœåœ¨å›¾è¡¨ä¸Šä»¥æ˜¾ç¤ºç¼–è¾‘/é¢„è§ˆæ§ä»¶ã€‚
* **ç§»åŠ¨ç«¯**ï¼šç‚¹å‡»å›¾è¡¨ä»¥æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®ï¼Œç„¶ååœ¨æ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚

### è¯­æ³•é”™è¯¯å¤„ç†

å¦‚æœæ‚¨çš„ Mermaid ä»£ç ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œå›¾è¡¨ä¸‹æ–¹ä¼šå‡ºç°ä¸€ä¸ª **çº¢è‰²é”™è¯¯æ¡†**ã€‚æ­¤æ¡†æ˜¾ç¤º Mermaid è§£æå™¨æŠ¥å‘Šçš„æœ‰ç”¨ä¿¡æ¯å’Œé”™è¯¯ã€‚çº æ­£è¯­æ³•åï¼Œå›¾è¡¨å°†æ›´æ–°ã€‚

![](/img/docs/reference/SCR-20250317-jbso.png)

### åˆ é™¤ Mermaid å›¾è¡¨

è¦åˆ é™¤ Mermaid å›¾è¡¨ï¼š

* **æ¡Œé¢ç«¯**ï¼šç‚¹å‡»å›¾è¡¨å¹¶æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ `Delete` é”®ã€‚
* **ç¼–è¾‘æ—¶**ï¼šåœ¨ä»£ç å—çš„å¼€å¤´æŒ‰ä¸‹ `Backspace`ã€‚

## Mermaid åŒ…ç‰ˆæœ¬æ§åˆ¶

TinaCMS ä½¿ç”¨ **Mermaid NPM åŒ…** æ¥æ¸²æŸ“å’Œè§£æ Mermaid è¯­æ³•ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å·²å°†å†…éƒ¨ç‰ˆæœ¬é”å®šä¸º `v9.3.0` ä»¥ç¡®ä¿ä¸ CommonJS çš„å…¼å®¹æ€§ã€‚

ç„¶è€Œï¼Œåœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­å®‰è£… Mermaid æ—¶ï¼Œæ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ä»»ä½•ç‰ˆæœ¬çš„ Mermaid æˆ–å…¶ä»–å…¼å®¹çš„æ¸²æŸ“åŒ…ã€‚

## ç¤ºä¾‹

### åœ¨ React ä¸­è®¾ç½® Mermaid

è¦åœ¨æ‚¨çš„ React é¡¹ç›®ä¸­å¿«é€Ÿå¼€å§‹ä½¿ç”¨ MermaidJSï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

#### 1. å®‰è£… Mermaid åŒ…

é¦–å…ˆï¼Œä½¿ç”¨æ‚¨çš„åŒ…ç®¡ç†å™¨å®‰è£… Mermaid åŒ…ï¼š

```shell
pnpm install mermaid
```

#### 2. åˆ›å»ºä¸€ä¸ª `MermaidElement` ç»„ä»¶

æ­¤ç»„ä»¶å°†åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ¸²æŸ“ Mermaid å›¾è¡¨ã€‚ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š

```javascript
import { useRef, useEffect } from 'react';
import mermaid from 'mermaid';

export default function MermaidElement({ value }) {
  const mermaidRef = useRef(null);

  useEffect(() => {
    if (mermaidRef.current) {
      mermaid.initialize({ startOnLoad: true });
      mermaid.run();
    }
  }, []);

  return (
    <div contentEditable={false}>
      <div ref={mermaidRef}>
        <pre className="mermaid">{value}</pre>
      </div>
    </div>
  );
}

```

#### 3. å°† Mermaid ç»„ä»¶æ·»åŠ åˆ° `<TinaMarkdown />`

å°† `MermaidElement` é›†æˆåˆ° `<TinaMarkdown />` ç»„ä»¶ä¸­ä»¥å¤„ç† Mermaid å›¾è¡¨ï¼š

```javascript
<TinaMarkdown content={content} components={{
  mermaid({ value }) {
    return <MermaidElement value={value} />;
  }
}} />

```

#### 4. å®Œæˆï¼ğŸ‰

æ‚¨çš„ React åº”ç”¨ç°åœ¨å¯ä»¥æ¸²æŸ“åœ¨ TinaCMS ç¼–è¾‘å™¨ä¸­åˆ›å»ºçš„ Mermaid å›¾è¡¨ã€‚