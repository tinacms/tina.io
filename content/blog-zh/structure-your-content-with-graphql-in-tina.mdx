---
seo:
  title: ä½¿ç”¨GraphQLåœ¨Tinaä¸­æ„å»ºå†…å®¹ç»“æ„ | TinaCMSåšå®¢
  description: >-
    æ¢ç´¢å¦‚ä½•åœ¨TinaCMSä¸­ä½¿ç”¨GraphQLæ¥æ›´é«˜æ•ˆåœ°æ„å»ºå’ŒæŸ¥è¯¢å†…å®¹ï¼Œæå‡æ•°æ®è·å–å’Œå†…å®¹ç®¡ç†ã€‚
title: ä½¿ç”¨GraphQLåœ¨Tinaä¸­æ„å»ºå†…å®¹ç»“æ„
date: '2021-06-25T18:34:12+02:00'
last_edited: '2021-06-25T20:42:18.533Z'
author: Frank Taillandier
prev: content/blog-zh/announcement-tina-cloud-is-officially-in-alpha.mdx
next: content/blog-zh/manage-your-media-with-cloudinary.mdx
---

<WarningCallout
  body={<>
    **æ›´æ–°**: Tina APIæ­£åœ¨ä¸æ–­å‘å±•ï¼Œæœ¬æ–‡ä¸­çš„å†…å®¹å·²è¿‡æ—¶ã€‚è¦è·å–Tinaçš„å…¥é—¨å¸®åŠ©ï¼Œæˆ‘ä»¬å»ºè®®æŸ¥çœ‹æˆ‘ä»¬çš„[å…¥é—¨æ–‡æ¡£](https://tina.io/docs/setup-overview/)ã€‚
  </>}
/>

Tinaé‡‡ç”¨ä»¥å¼€å‘è€…ä¸ºä¸­å¿ƒçš„æ–¹æ³•æ¥æ„å»ºå†…å®¹ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æœ¬åœ°å»ºæ¨¡ä½ çš„å†…å®¹ã€‚å¾—ç›Šäºå­˜å‚¨åœ¨ä½ ä»“åº“ä¸­çš„[æ–‡ä»¶ä¹‹ä¸Šçš„GraphQLå±‚](/blog/using-graphql-with-the-filesystem/)ï¼ŒTinaä½¿å¾—åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­æŸ¥è¯¢å†…å®¹å˜å¾—æ›´åŠ ç®€å•ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆæ„Ÿè§‰ã€‚

å½“æˆ‘ä»¬æåˆ°åŸºäºGitæ—¶ï¼Œè¿™æ„å‘³ç€ä½ çš„å†…å®¹å­˜å‚¨åœ¨Markdownå’ŒJSONæ–‡ä»¶ä¸­ï¼Œå¹¶ç”¨å‰ç½®å…ƒæ•°æ®å»ºæ¨¡ï¼›åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒTinaCloudæ—¨åœ¨è®©ä½ åˆ©ç”¨[GraphQL](https://graphql.org/)çš„å¼ºå¤§åŠŸèƒ½ã€‚

æˆ‘ä»¬å¼€æºäº†[tina-graphql-gatewayåŒ…](https://github.com/tinacms/tina-graphql-gateway)ï¼Œä»¥ä¾¿ä½ å¯ä»¥äº†è§£å…¶å·¥ä½œåŸç†ã€‚å®ƒåŒ…å«äº†å¼€å‘è€…ä½¿ç”¨Tinaå’ŒGraphQLçš„ä¸åŒå·¥å…·ï¼š

- ä¸€ä¸ªGraphQLæ¨¡å¼ç¼–è¯‘å™¨ï¼Œ
- ä¸€ä¸ªGraphQLæœåŠ¡å™¨ï¼Œ
- ä¸€ä¸ªGraphQLå®¢æˆ·ç«¯ï¼ˆAltairï¼‰ï¼Œ
- ä¸€ä¸ªç”¨äºç¼–è¯‘æ¨¡å¼å’Œå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨çš„å‘½ä»¤è¡Œæ¥å£ï¼Œ
- Next.jsçš„TinaåŠ©æ‰‹ï¼Œ
- ä»¥åŠæ›´å¤šâ€¦â€¦

åœ¨å¤„ç†ç»“æ„åŒ–å†…å®¹æ—¶ï¼Œå…¸å‹çš„å¼€å‘è€…å·¥ä½œæµç¨‹æ˜¯è¿è¡ŒTinaæœ¬åœ°GraphQLæœåŠ¡å™¨ï¼Œç¼–è¾‘ä½ çš„æ¨¡å¼ï¼Œåˆ›å»ºå’Œæµ‹è¯•æŸ¥è¯¢ä»¥åœ¨ä½ çš„Next.jsé¡µé¢ä¸­ä½¿ç”¨ã€‚

## GraphQLæ¨¡å¼æ˜¯å”¯ä¸€çš„çœŸå®æ¥æº

GraphQLæ¨¡å¼å…è®¸ä½ æè¿°ä½ çš„å†…å®¹ç±»å‹æˆ–æˆ‘ä»¬ç§°ä¹‹ä¸ºçš„**é›†åˆ**ã€‚åœ¨æ¨¡å¼çš„æ ¹éƒ¨ï¼Œä½ å¯ä»¥åˆ—å‡ºæ‰€æœ‰çš„é›†åˆã€‚

ä¸€ä¸ªé›†åˆæŒ‡å‘ä½ ä»“åº“ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨é‚£é‡Œä½ å­˜å‚¨ä¸€ç§å†…å®¹ç±»å‹ï¼Œæ¯”å¦‚åšå®¢æ–‡ç« ã€é£Ÿè°±ã€ä¹¦ç±ã€äº§å“ç­‰ã€‚

æ¯ä¸ªé›†åˆéœ€è¦ï¼š

- ä¸€ä¸ªå°†åœ¨ç”Ÿæˆçš„TinaCMSè¡¨å•ä¸­æ˜¾ç¤ºçš„`label`ï¼Œ
- ä¸€ä¸ªå°†åœ¨GraphQL APIä¸­ä½¿ç”¨çš„`name`ã€‚
- ä¸€ä¸ªå¯é€‰çš„`description`ï¼Œç”¨äºåœ¨TinaCMSä¸­æ˜¾ç¤ºåœ¨è¡¨å•å­—æ®µä¸Šæ–¹çš„å¸®åŠ©æ–‡æœ¬
- ä¸€ä¸ªå¯é€‰çš„`format`ï¼ˆ`json`ç”¨äºJSONæ–‡ä»¶ï¼Œ`md`ç”¨äºMarkdownæ–‡ä»¶ï¼‰ã€‚

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªéå¸¸åŸºæœ¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ªæŒ‡å‘`content/posts`çš„åšå®¢æ–‡ç« é›†åˆï¼Œå¹¶ç®€å•åœ°å°†æˆ‘ä»¬çš„é›†åˆå‘½åä¸º`posts`ã€‚

ä¸ºäº†æè¿°è¿™ç§å†…å®¹ç±»å‹çš„å½¢çŠ¶ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ª**æ¨¡æ¿**ã€‚å¯¹äºæˆ‘ä»¬çš„åŸºæœ¬åšå®¢æ–‡ç« ï¼Œæˆ‘ä»¬å°†é¦–å…ˆè¯´æ˜ä¸€ä¸ª_æ–‡ç« _å…·æœ‰ä»¥ä¸‹å‰ç½®å…ƒæ•°æ®å­—æ®µï¼š

- `title`ï¼ˆæ–‡æœ¬ï¼‰ï¼Œ
- `author`ï¼ˆå¯¹ä½œè€…é›†åˆçš„å¼•ç”¨ï¼‰ã€‚

æˆ‘ä»¬è¿˜éœ€è¦ä¸ºä½œè€…å®šä¹‰ä¸€ä¸ªé›†åˆï¼Œä»¥åŠä¸€ä¸ªå…·æœ‰ä»¥ä¸‹å†…å®¹çš„åŸºæœ¬ä½œè€…æ¨¡æ¿ï¼š

- ä¸€ä¸ª`name`ï¼ˆæ–‡æœ¬ï¼‰ï¼Œ
- ä¸€ä¸ª`avatar`ï¼ˆURLå³æ–‡æœ¬ï¼‰ã€‚

> ğŸ’¡ è¦åœ¨ç¼–è¾‘æ¨¡å¼æ—¶è·å¾—ç±»å‹è‡ªåŠ¨è¡¥å…¨ï¼Œè¯·å®‰è£…[VSCode GraphQLæ‰©å±•](https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql)ã€‚

å­˜å‚¨åœ¨`.tina/schema.ts`ä¸­çš„ç›¸åº”æ¨¡å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

```js
import { defineSchema } from 'tina-graphql-gateway-cli';

export default defineSchema({
  collections: [
    {
      label: 'Blog Posts',
      name: 'post',
      path: 'content/posts',
      templates: [
        {
          label: 'Article',
          name: 'article',
          fields: [
            {
              type: 'text',
              label: 'Title',
              name: 'title',
            },
            {
              type: 'reference',
              label: 'Author',
              name: 'author',
              collection: 'author',
            },
          ],
        },
      ],
    },
    {
      label: 'Authors',
      name: 'author',
      path: 'content/authors',
      templates: [
        {
          label: 'Author',
          name: 'author',
          fields: [
            {
              type: 'text',
              label: 'Name',
              name: 'name',
            },
            {
              type: 'text',
              label: 'Avatar',
              name: 'avatar',
            },
          ],
        },
      ],
    },
  ],
});
```

<Youtube embedSrc="https://www.youtube.com/embed/EwewKEHHkd4" />

## ä½¿ç”¨GraphQLæŸ¥è¯¢ä½ çš„å†…å®¹

Tina CLIæä¾›äº†ä¸€ä¸ªå‘½ä»¤æ¥è¿è¡Œæœ¬åœ°GraphQLæœåŠ¡å™¨ï¼Œä»¥ç›‘è§†æˆ‘ä»¬æ¨¡å¼ä¸­çš„æ›´æ”¹å¹¶åœ¨ç¼–è¾‘æ—¶ç¼–è¯‘å®ƒï¼›å®ƒåœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸Next.jsä¸€èµ·è¿è¡Œã€‚æˆ‘ä»¬å°†å…¶è®¾ä¸º`package.json`ä¸­çš„é»˜è®¤`dev` npmè„šæœ¬ï¼Œè¿™æ ·å½“æˆ‘ä»¬è¿è¡Œ`yarn dev`æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ä¸€ä¸ªGraphQL playgroundï¼š

yarn dev
yarn tina-gql server\:start -c "next dev"

åœ¨ç«¯å£4001ä¸Šå¯åŠ¨æ–‡ä»¶ç³»ç»ŸGraphQLæœåŠ¡å™¨
è®¿é—®playgroundï¼š[http://localhost:4001/altair/](http://localhost:4001/altair/)
â€¦

æ‰“å¼€`http://localhost:4001/altair`æ—¶ï¼Œ[Altair GraphQLå®¢æˆ·ç«¯](https://altair.sirmuel.design/)è®©ä½ å¯ä»¥æ„å»ºæŸ¥è¯¢å¹¶æµè§ˆAPIæ–‡æ¡£ã€‚

![åœ¨Altair GraphQLå®¢æˆ·ç«¯ä¸­è¿”å›æˆ‘ä»¬æ•°æ®çš„åšå®¢æŸ¥è¯¢](/img/blog/altair-client-tina.png)

æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å…¶ç›¸å¯¹è·¯å¾„ä¼ é€’ç»™åœ¨`content/posts`ä¸­å®šä¹‰çš„é›†åˆæ¥æŸ¥è¯¢åšå®¢æ–‡ç« ï¼Œå¹¶ä»æˆ‘ä»¬çš„å­—æ®µä¸­è·å–æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```graphql
query BlogPost {
  post(relativePath: "myBlogPost.md") {
    __typename
    ... on PostArticle {
      title
      author {
        ... on Author {
          name
          avatar
        }
      }
      _body
    }
  }
}
```

ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•ä»æˆ‘ä»¬çš„æ–‡ä»¶ä¸­æŸ¥è¯¢æ•°æ®ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨æˆ‘ä»¬çš„Next.jsåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¯¥æŸ¥è¯¢ï¼Œä»å®¢æˆ·ç«¯è¯·æ±‚å®ƒï¼Œå¹¶è¦æ±‚Tinaç”Ÿæˆç›¸åº”çš„è¡¨å•ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„è´¡çŒ®è€…èƒ½å¤Ÿç›´è§‚åœ°ç¼–è¾‘å®ƒã€‚æˆ‘ä»¬å°†åœ¨åç»­æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»å‰©ä½™çš„æ­¥éª¤ï¼Œæ•¬è¯·æœŸå¾…ï¼

_[åŠ å…¥æˆ‘ä»¬çš„Discord](https://discord.com/invite/zumN63Ybpf)ï¼Œå¦‚æœä½ å¯¹å¦‚ä½•ä½¿ç”¨Tinaå’ŒNext.jsæœ‰ä»»ä½•ç–‘é—®ã€‚_