---
draft: true
seo:
  title: ä½¿ç”¨GraphQLä¸æ–‡ä»¶ç³»ç»Ÿ | TinaCMSåšå®¢
  description: >-
    å­¦ä¹ å¦‚ä½•åœ¨TinaCMSä¸­å°†GraphQLä¸æ–‡ä»¶ç³»ç»Ÿé›†æˆï¼Œä»è€Œä¸ºåŸºäºæ–‡ä»¶çš„é¡¹ç›®å®ç°é«˜æ•ˆçš„å†…å®¹æŸ¥è¯¢å’Œç®¡ç†ã€‚
title: ç”¨GraphQLå¢å¼ºåŸºäºæ–‡ä»¶çš„å†…å®¹
date: '2021-04-29T10:00:00.000Z'
last_edited: '2021-04-29T15:31:22.309Z'
author: Jeff See
prev: content/blog-zh/tina-cloud-a-headless-cms-backed-by-git.mdx
next: content/blog-zh/evolution-of-inline-editing.mdx
---

ä»Šå¤©æˆ‘ä»¬æƒ³å‘æ‚¨ä»‹ç»Tina GraphQLç½‘å…³ï¼Œå®ƒä¸ºåŸºäºGitçš„å†…å®¹ç®¡ç†å¸¦æ¥äº†å¯é æ€§ã€‚è¿™æ˜¯æä¾›å¼ºå¤§ç»“æ„åŒ–å†…å®¹çš„å…³é”®éƒ¨åˆ†ï¼ŒåŒæ—¶æ‚¨çš„å†…å®¹ä»ç„¶å®Œå…¨å¯ç§»æ¤ã€‚

## å…‹æœæ–‡ä»¶ç³»ç»Ÿçš„é™åˆ¶

å¤šå¹´æ¥ï¼Œä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç½‘ç«™å†…å®¹ç®¡ç†ä¸€ç›´æ˜¯Webå¼€å‘ç”Ÿæ€ç³»ç»Ÿçš„æ”¯æŸ±ã€‚èƒ½å¤Ÿä¸€æ¬¡æ€§å‘å¸ƒæ•´ä¸ªç½‘ç«™ï¼Œå¹¶é€šè¿‡Gitè½»æ¾å›æ»šä»»ä½•æ›´æ”¹ï¼Œä½¿å…¶æˆä¸ºä¸€ç§æµè¡Œä¸”é«˜æ•ˆçš„å·¥ä½œæ–¹å¼ã€‚

å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨æ–‡ä»¶è¿›è¡Œå†…å®¹ç®¡ç†çš„å¼€æ”¾æ€§å¯èƒ½ä¼šå¯¼è‡´å¤´ç–¼ã€‚å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰æ€»æ˜¯ä»¥å¦ä¸€ç§æ–¹å¼æä¾›ä¿¡å¿ƒâ€”â€”çŸ¥é“æ‚¨çš„å†…å®¹ç»“æ„ä¸ä¼šåœ¨æ‚¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„å¯æ€•ï¼ˆä¸”å¼ºå¤§ï¼‰ä¹‹å¤„åœ¨äºï¼Œæ²¡æœ‰å±‚æ¥ç¡®ä¿æ‚¨è·å¾—æœŸæœ›çš„å†…å®¹ã€‚è¿™æ˜¯ä¸€ç§æƒè¡¡ï¼Œæœ‰è®¸å¤šæœ‰æ•ˆçš„ç”¨ä¾‹ï¼Œä½†ä¹Ÿæœ‰è®¸å¤šæ½œåœ¨çš„é™·é˜±ã€‚

## è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­

æˆ‘ä»¬å°†ä½¿ç”¨[Next.jsåšå®¢å¯åŠ¨å™¨](https://github.com/vercel/next.js/tree/canary/examples/blog-starter)æ¥æ¼”ç¤ºåŸºäºæ–‡ä»¶çš„å†…å®¹çš„ä¸€äº›é—®é¢˜ä»¥åŠæˆ‘ä»¬å¸Œæœ›å¦‚ä½•è§£å†³å®ƒä»¬ã€‚å¦‚æœæ‚¨æƒ³è·Ÿéšï¼Œå¯ä»¥[åˆ†å‰æ­¤ä»“åº“](https://github.com/tinacms/next-blog-starter-graphql)å¹¶ä»åä¸º[`start`](https://github.com/tinacms/next-blog-starter-graphql/tree/start)çš„åˆ†æ”¯å¼€å§‹ã€‚è¦è·³åˆ°æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼Œè¯·æŸ¥çœ‹[`add-tina-gql`](https://github.com/tinacms/next-blog-starter-graphql/tree/add-tina-gql)åˆ†æ”¯ã€‚

### æˆ‘ä»¬çš„å†…å®¹ç»“æ„

è¿™ä¸ªåº”ç”¨ç¨‹åºä»ä¸€ä¸ªåä¸º`_posts`çš„æ–‡ä»¶å¤¹ä¸­çš„Markdownæ–‡ä»¶ä¸­è·å–å†…å®¹ï¼š

* \_posts
  * dynamic-routing.md
  * hello-world.md
  * preview\.md
* pages
  * index.js # åˆ—å‡ºåšå®¢æ–‡ç« 
  * posts
    * \[slug].js # åŠ¨æ€æ˜¾ç¤ºç›¸åº”çš„åšå®¢æ–‡ç« 

åœ¨ä¸»é¡µä¸Šï¼Œæˆ‘ä»¬ä»`_posts`ç›®å½•ä¸­è·å–æ¯ç¯‡æ–‡ç« ï¼Œå¹¶åœ¨æ˜¾ç¤ºä¹‹å‰æŒ‰æ—¥æœŸæ’åºï¼Œä½¿ç”¨æˆ‘ä»¬çš„`getAllPosts`å‡½æ•°ï¼š

```js
export function getAllPosts(fields = []) {
  const slugs = getPostSlugs()
  const posts = slugs
    .map((slug) => getPostBySlug(slug, fields))
    // æŒ‰æ—¥æœŸé™åºæ’åºæ–‡ç« 
    .sort((post1, post2) => (post1.date > post2.date ? -1 : 1))
  return posts
}
```

ç»“æœå¦‚ä¸‹ï¼š

![](/img/blog/using-graphql-with-the-filesystem/next-demo-home_kcnyv5.png)

> æ¼”ç¤ºï¼šâ¡ï¸ [å¼€å§‹è·Ÿéš](https://github.com/tinacms/next-blog-starter-graphql/tree/start)

#### åŸºäºæ–‡ä»¶çš„å†…å®¹å¾ˆç®€å•

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„å†…å®¹ç®¡ç†å¾ˆå¥½ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ›´æ”¹å­˜å‚¨åœ¨Gitä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœçŠ¯äº†é”™è¯¯ï¼Œå¯ä»¥è½»æ¾å›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬ã€‚ä½†éšç€å†…å®¹å¤æ‚æ€§çš„å¢åŠ ï¼Œäº‹æƒ…å˜å¾—ä¸é‚£ä¹ˆç®€å•ã€‚

ä¸ºäº†æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹æˆ‘ä»¬çš„å†…å®¹æ˜¯å¦‚ä½•ç»“æ„åŒ–çš„ã€‚"åŠ¨æ€è·¯ç”±å’Œé™æ€ç”Ÿæˆ"åšå®¢æ–‡ç« çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```markdown
---
title: 'åŠ¨æ€è·¯ç”±å’Œé™æ€ç”Ÿæˆ'
excerpt: 'Lorem  ...'
coverImage: '/assets/blog/dynamic-routing/cover.jpg'
date: '2020-03-16T05:35:07.322Z'
author:
  name: JJ Kasper
  picture: '/assets/blog/authors/jj.jpeg'
ogImage:
  url: '/assets/blog/dynamic-routing/cover.jpg'
---

Lorem ipsum dolor sit amet ...
```

è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ åœ¨ä¸»é¡µä¸Šæ˜¾ç¤ºå“ªäº›åšå®¢æ–‡ç« çš„è¿‡æ»¤åŠŸèƒ½æ¥æ‰©å±•æ­¤ç»“æ„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¸ºæ¯ç¯‡æ–‡ç« æ·»åŠ ä¸€ä¸ªæ–°çš„`boolean`å€¼ï¼Œç§°ä¸º`featured`ã€‚

```markdown
---
title: 'åŠ¨æ€è·¯ç”±å’Œé™æ€ç”Ÿæˆ'
excerpt: 'Lorem  ...'
coverImage: '/assets/blog/dynamic-routing/cover.jpg'
date: '2020-03-16T05:35:07.322Z'
author:
  name: JJ Kasper
  picture: '/assets/blog/authors/jj.jpeg'
ogImage:
  url: '/assets/blog/dynamic-routing/cover.jpg'
featured: true
---

Lorem ipsum dolor sit amet ...
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥ç›¸åº”åœ°æ›´æ–°æˆ‘ä»¬çš„`getAllPosts`å‡½æ•°ï¼š

```diff
export function getAllPosts(fields = []) {
  const slugs = getPostSlugs();
  const posts = slugs
    .map((slug) => getPostBySlug(slug, fields))
    // æŒ‰æ—¥æœŸé™åºæ’åºæ–‡ç« 
   .sort((post1, post2) => (post1.date > post2.date ? -1 : 1))
+  .filter((post) => post.featured);
  return posts
}
```

è®©æˆ‘ä»¬æ·»åŠ ä¸€ç¯‡æ–°æ–‡ç« æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« *ä¸ä¼š*è¢«æ¨èï¼š

```markdown
---
title: 'ä¸ºä»€ä¹ˆTinaå¾ˆæ£’'
excerpt: 'Lorem  ...'
coverImage: '/assets/blog/dynamic-routing/cover.jpg'
date: '2021-04-25T05:35:07.322Z'
author:
  name: JJ Kasper
  picture: '/assets/blog/authors/jj.jpeg'
ogImage:
  url: '/assets/blog/dynamic-routing/cover.jpg'
featured: 'false'
---

Lorem ipsum dolor sit amet ...
```

å“å‘€ï¼Œçœ‹çœ‹è°å‡ºç°åœ¨æˆ‘ä»¬çš„ä¸»é¡µä¸Šï¼š

![](/img/blog/using-graphql-with-the-filesystem/llama-woops_cchyel.png)

ä½ èƒ½å‘ç°é—®é¢˜å—ï¼Ÿæˆ‘ä»¬ä¸å°å¿ƒå°†`featured`è®¾ç½®ä¸º`"false"`è€Œä¸æ˜¯`false`ï¼æˆ‘ä»¬æŠŠå®ƒè®¾æˆäº†`string`ï¼Œè€Œä¸æ˜¯`boolean`ã€‚

> æ¼”ç¤ºï¼šğŸ‘€ [å‘ç°æˆ‘ä»¬çš„é”™è¯¯](https://github.com/tinacms/next-blog-starter-graphql/compare/start..featured-tag-mistake)ã€‚

å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯CMSï¼Œè¿™ç§æƒ…å†µå¯èƒ½ä¸ä¼šå‘ç”Ÿã€‚å¤§å¤šæ•°CMSè¦æ±‚æ‚¨çš„å†…å®¹ç»“æ„æ˜¯æ˜ç¡®å®šä¹‰çš„ã€‚è™½ç„¶è¿™äº›é—®é¢˜å¾ˆç—›è‹¦ï¼Œä½†CMSä¸ºæˆ‘ä»¬æä¾›çš„è¿˜æœ‰å¾ˆå¤šæ˜¯æ–‡ä»¶ç³»ç»Ÿæ— æ³•æä¾›çš„â€”â€”æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬çš„å†…å®¹ç»“æ„ä¸­æœ‰äº›åœ°æ–¹æ„Ÿè§‰ä¸å¤ªå¯¹åŠ²â€¦â€¦

### å…³ç³»ï¼šè¿™å¾ˆå¤æ‚

è®©æˆ‘ä»¬å†çœ‹çœ‹æˆ‘ä»¬æ–°åšå®¢æ–‡ç« ä¸­çš„æ•°æ®ï¼š

***

title: "ä¸ºä»€ä¹ˆTinaå¾ˆæ£’"
excerpt: "Lorem ..."
coverImage: "/assets/blog/dynamic-routing/cover.jpg"
date: "2021-04-25T05:35:07.322Z"
author:
name: JJ Kasper
picture: "/assets/blog/authors/jj.jpeg"
ogImage:
url: "/assets/blog/dynamic-routing/cover.jpg"
featured: "false"

***

Lorem ipsum dolor sit ametâ€¦

`author`å†…å®¹åœ¨"åŠ¨æ€è·¯ç”±å’Œé™æ€ç”Ÿæˆ"æ–‡ç« ä¸­æ˜¯ç›¸åŒçš„ã€‚å¦‚æœJJæƒ³è¦æ›´æ”¹ä»–çš„`picture`ï¼Œä»–éœ€è¦åœ¨ä»–å†™çš„æ¯ç¯‡æ–‡ç« ä¸­æ›´æ–°å®ƒã€‚è¿™å¬èµ·æ¥åƒæ˜¯CMSå¯ä»¥é€šè¿‡å†…å®¹*å…³ç³»*è§£å†³çš„é—®é¢˜ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼ŒJJåº”è¯¥æ˜¯ä¸€ä¸ª*æ‹¥æœ‰è®¸å¤š*æ–‡ç« çš„ä½œè€…ã€‚è¦ç”¨æˆ‘ä»¬çš„åŸºäºæ–‡ä»¶çš„å†…å®¹è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä½œè€…æ•°æ®æ‹†åˆ†åˆ°è‡ªå·±çš„æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨`post`ç»“æ„ä¸­æ”¾ç½®å¯¹è¯¥ä½œè€…æ–‡ä»¶åçš„å¼•ç”¨ï¼š

author: \_authors/jj.md

ä½†ç°åœ¨æˆ‘ä»¬å¿…é¡»æ›´æ–°æˆ‘ä»¬çš„æ•°æ®è·å–é€»è¾‘ï¼Œä»¥ä¾¿æ¯å½“å®ƒé‡åˆ°æ–‡ç« ä¸­çš„`author`å­—æ®µæ—¶ï¼Œå®ƒçŸ¥é“è¦ä¸º*è¯¥*æ•°æ®å‘å‡ºé¢å¤–çš„è¯·æ±‚ã€‚è¿™ç›¸å½“éº»çƒ¦ï¼Œè€Œä¸”éšç€å¤æ‚æ€§çš„å¢åŠ ï¼Œè¿™ç§é€»è¾‘å¾ˆå¿«å˜å¾—ä¸å¯è¡Œã€‚ä½¿ç”¨CMS SDKæˆ–GraphQL APIï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥ç¡®ä¿¡å¦‚æœä¸€ä¸ªæ–‡æ¡£è¢«å¦ä¸€ä¸ªæ–‡æ¡£å¼•ç”¨ï¼Œå®ƒå°±ä¸èƒ½è¢«åˆ é™¤ã€‚

> æ¼”ç¤ºï¼š[æŸ¥çœ‹å·®å¼‚](https://github.com/tinacms/next-blog-starter-graphql/compare/featured-tag-mistake..split-author-data)ï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•ç¬¨æ‹™åœ°åˆ©ç”¨ä¸€ä¸ªå•ç‹¬çš„`author`æ–‡ä»¶çš„ã€‚

### å†…å®¹ç®¡ç†ç³»ç»Ÿï¼šå¯é ï¼Ÿæ˜¯çš„ã€‚å¯ç§»æ¤ï¼Ÿä¸ã€‚

æ— å¤´CMSæ˜¯ä¿æŒå¯¹å‰ç«¯ä»£ç çš„å®Œå…¨æ§åˆ¶çš„å¥½æ–¹æ³•ï¼ŒåŒæ—¶å°†ä¸Šè¿°é—®é¢˜è½¬ç§»åˆ°æ›´å¼ºå¤§çš„å†…å®¹å±‚ã€‚ä½†å½“æ‚¨å°†å†…å®¹äº¤ç»™CMSæ—¶ï¼Œæ‚¨å°±å¤±å»äº†æ–‡ä»¶ç³»ç»Ÿå†…ç½®çš„Gitçš„å¼ºå¤§åŠŸèƒ½ã€‚

ä½¿ç”¨CMSï¼Œå½“æ‚¨æ›´æ”¹å†…å®¹çš„ç»“æ„æ—¶ï¼Œæ‚¨è¿˜éœ€è¦*åè°ƒ*æ–°ç»“æ„ä¸æ‚¨çš„ä»£ç ï¼Œå¹¶ä¸”æ‚¨éœ€è¦ç¡®ä¿æ‰€æœ‰ç°æœ‰å†…å®¹éƒ½å·²ç›¸åº”æ›´æ–°ã€‚

å¤§å¤šæ•°CMSå·²ç»æƒ³å‡ºå„ç§æ–¹æ³•æ¥å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå•ç‹¬çš„æ²™ç®±ç¯å¢ƒã€é¢„è§ˆAPIå’Œè¿ç§»SDKè„šæœ¬â€”â€”æ‰€æœ‰è¿™äº›éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—éº»çƒ¦ã€‚ä½¿ç”¨åŸºäºæ–‡ä»¶çš„å†…å®¹ï¼Œè¿™äº›éƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œ*ä¸€åˆ‡éƒ½ä¸€èµ·ç§»åŠ¨å’Œæ”¹å˜*ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬èƒ½å°†æ— å¤´CMSçš„å¼ºå¤§åŠŸèƒ½å¸¦åˆ°æ‚¨çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ

## è®¤è¯†Tinaå†…å®¹API

ä»Šå¤©æˆ‘ä»¬ä»‹ç»ä¸€ç§å·¥å…·ï¼Œå®ƒç»“åˆäº†æ— å¤´CMSçš„å¼ºå¤§åŠŸèƒ½å’ŒåŸºäºæ–‡ä»¶çš„å†…å®¹çš„ä¾¿åˆ©æ€§å’Œå¯ç§»æ¤æ€§ã€‚**Tinaå†…å®¹APIæ˜¯ä¸€ä¸ªä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè·å–å†…å®¹çš„GraphQLæœåŠ¡**ã€‚å®ƒå°†å¾ˆå¿«é€šè¿‡[TinaCloud](https://app.tina.io)æä¾›ï¼Œè¯¥æœåŠ¡è¿æ¥åˆ°æ‚¨çš„GitHubä»“åº“ï¼Œæä¾›ç›¸åŒçš„åŸºäºäº‘çš„æ— å¤´APIã€‚

ä¸ºäº†äº†è§£å…¶å·¥ä½œåŸç†ï¼Œè®©æˆ‘ä»¬å¯¹åšå®¢æ¼”ç¤ºè¿›è¡Œä¸€äº›è°ƒæ•´ã€‚

é¦–å…ˆå®‰è£…Tina CLIï¼š

```sh
yarn add tina-graphql-gateway-cli
```

ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ¨¡å¼ï¼Œä»¥ä¾¿APIç¡®åˆ‡çŸ¥é“ä¸ºæ‚¨çš„å†…å®¹æ„å»ºä»€ä¹ˆæ ·çš„ç»“æ„ï¼š

```sh
mkdir .tina && touch .tina/schema.ts
```

```ts
// `.tina/schema.ts`
import { defineSchema } from 'tina-graphql-gateway-cli'

export default defineSchema({
  collections: [
    {
      label: 'æ–‡ç« ',
      name: 'post',
      /*
       * æŒ‡ç¤ºä¿å­˜æ­¤ç±»å†…å®¹çš„ä½ç½®ï¼ˆä¾‹å¦‚"_posts"æ–‡ä»¶å¤¹ï¼‰
       */
      path: '_posts',
      templates: [
        {
          label: 'ç®€å•',
          name: 'simple_post',
          fields: [
            {
              type: 'text',
              label: 'æ ‡é¢˜',
              name: 'title',
            },
            {
              type: 'text',
              label: 'æ‘˜è¦',
              name: 'excerpt',
            },
            {
              type: 'text',
              label: 'å°é¢å›¾ç‰‡',
              name: 'coverImage',
            },
            {
              type: 'text',
              label: 'æ—¥æœŸ',
              name: 'date',
            },
            {
              // æˆ‘ä»¬æŒ‡ç¤ºä½œè€…æ˜¯å¯¹å¦ä¸€ä¸ªæ–‡æ¡£çš„"å¼•ç”¨"
              type: 'reference',
              name: 'author',
              label: 'ä½œè€…',
              collection: 'author',
            },
            {
              type: 'group',
              name: 'ogImage',
              label: 'å¼€æ”¾å›¾åƒ',
              fields: [
                {
                  type: 'text',
                  label: 'URL',
                  name: 'url',
                },
              ],
            },
            {
              type: 'toggle',
              label: 'æ¨è',
              name: 'featured',
            },
          ],
        },
      ],
    },
    {
      name: 'author',
      label: 'ä½œè€…',
      path: '_authors',
      templates: [
        {
          label: 'ä½œè€…',
          name: 'author',
          fields: [
            {
              type: 'text',
              label: 'å§“å',
              name: 'name',
            },

            {
              name: 'picture',
              label: 'å›¾ç‰‡',
              type: 'text',
            },
          ],
        },
      ],
    },
  ],
})
```

æ³¨æ„æˆ‘ä»¬åœ¨`post.author`å­—æ®µä¸­å¼•ç”¨äº†`authors`éƒ¨åˆ†

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ›¿æ¢`dev`å‘½ä»¤ä»¥ä¾¿ä¸æˆ‘ä»¬çš„Next.jsåº”ç”¨ç¨‹åºä¸€èµ·å¯åŠ¨GraphQLæœåŠ¡å™¨ï¼š

```json
  "scripts": {
    "dev": "yarn tina-gql server:start -c \"next dev\"",
    ...
  },
```

> æ¼”ç¤ºï¼š[è¿™æ˜¯](https://github.com/tinacms/next-blog-starter-graphql/compare/featured-tag-mistake...add-tina-gql)æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€åšçš„æ›´æ”¹ã€‚æŸ¥çœ‹[`add-tina-graphql`](https://github.com/tinacms/next-blog-starter-graphql/tree/add-tina-gql)åˆ†æ”¯ä»¥ä»æ­¤ç‚¹å¼€å§‹ã€‚

è¿è¡Œ`dev`å‘½ä»¤ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæœ¬åœ°GraphQLæœåŠ¡å™¨åœ¨ç«¯å£4001ä¸Šç›‘å¬ï¼Œå¹¶æä¾›ä¸€äº›å…³äºè‡ªåŠ¨ç”Ÿæˆçš„é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼š

```sh
Started Filesystem GraphQL server on port: 4001
Generating Tina config
Tina config ======> /.tina/__generated__/config
Typescript types => /.tina/__generated__/types.ts
GraphQL types ====> /.tina/__generated__/schema.gql
ready - started server on 0.0.0.0:3000, url: http://localhost:3000
```

è®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼š

> ğŸ’¡æç¤ºï¼šå¦‚æœæ‚¨æœ‰åƒ[Altair](https://altair.sirmuel.design/)è¿™æ ·çš„GraphQLå®¢æˆ·ç«¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡æŒ‡å‘[http://localhost:4001/graphql](http://localhost:4001/graphql)æ¥æ¢ç´¢API

```graphql
# å°†æ‚¨çš„è¯·æ±‚æŒ‡å‘http://localhost:4001/graphql
{
  getPostList {
    data {
      ... on SimplePost_Doc_Data {
        title
      }
    }
  }
}
```

ç»“æœå¦‚ä¸‹ï¼š

```json
{
  "errors": [
    {
      "message": "Unexpected value of type string for boolean value",
      "path": ["getPostList"]
    }
  ],
  ...
}
```

è¿™ä¸ªé”™è¯¯æ¥è‡ªæˆ‘ä»¬çš„è€æœ‹å‹`featured: "false"`ã€‚è¿™æ­£æ˜¯æ‚¨ä»CMSè·å¾—çš„é‚£ç§ä¿è¯ï¼Œä½†æ²¡æœ‰ä»»ä½•å¼€é”€ã€‚åœ¨ä¿®å¤é—®é¢˜åï¼Œæˆ‘ä»¬å¾—åˆ°äº†é¢„æœŸçš„ç»“æœï¼š

```json
{
  "data": {
    "getPostList": [
      {
        "data": {
          "title": "åŠ¨æ€è·¯ç”±å’Œé™æ€ç”Ÿæˆ"
        }
      },
      ... # æˆªæ–­
    ]
  }
}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨GraphQLæ›¿æ¢æˆ‘ä»¬æ‰€æœ‰å®šåˆ¶çš„æ–‡ä»¶ç³»ç»Ÿæ•°æ®è·å–é€»è¾‘ï¼Œå¹¶ç¡®ä¿¡æˆ‘ä»¬å¾—åˆ°çš„æ•°æ®å°†æ˜¯æˆ‘ä»¬æœŸæœ›çš„ã€‚

```graphql
query BlogPostQuery($relativePath: String!) {
  getPostDocument(relativePath: $relativePath) {
    data {
      ... on SimplePost_Doc_Data {
        title
        excerpt
        date
        coverImage
        author {
          data {
            ... on Author_Doc_Data {
              name
              picture
            }
          }
        }
        ogImage {
          url
        }
        featured
        _body
      }
    }
  }
}
```

> æ¼”ç¤ºï¼š[æŸ¥çœ‹æ›´æ”¹](https://github.com/tinacms/next-blog-starter-graphql/compare/split-author-data..add-tina-gql)æˆ‘ä»¬æ‰€åšçš„ä»¥æ·»åŠ Tina GraphQL

## æœªå®Œå¾…ç»­

èƒ½å¤Ÿåœ¨æœ¬åœ°ä½¿ç”¨GraphQLæ˜¯å¸®åŠ©æˆ‘ä»¬å°†å®Œæ•´CMSçš„åŠŸèƒ½å¸¦åˆ°æ–‡ä»¶ç³»ç»Ÿçš„ç¬¬ä¸€æ­¥ã€‚TinaCloudå°†é€šè¿‡æ‰˜ç®¡çš„æ— å¤´APIæä¾›ç›¸åŒçš„å‡ºè‰²ä½“éªŒã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨é‡Œï¼Œæˆ‘ä»¬å°†ç»§ç»­åˆ†äº«æ›´å¤šå…³äºè¿™ä¸ªAPIå¦‚ä½•ä¸TinaCMSä¸€èµ·å·¥ä½œï¼Œä»¥æœ€å°çš„å¼€é”€å°†å¯è§†åŒ–å†…å®¹ç®¡ç†å¸¦åˆ°æ‚¨çš„ç½‘ç«™ã€‚

> çœ‹çœ‹æˆ‘ä»¬åˆšåˆšç»å†çš„[æ¼”ç¤º](https://github.com/tinacms/next-blog-starter-graphql/tree/add-tina-gql)ï¼Œçœ‹çœ‹æ‚¨æ˜¯å¦å¯ä»¥æ‰©å±•å®ƒï¼Œå¹¶ä¸æˆ‘ä»¬åˆ†äº«æ‚¨çš„è¿›å±•ï¼